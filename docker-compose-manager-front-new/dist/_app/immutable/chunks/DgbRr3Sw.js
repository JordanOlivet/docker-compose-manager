import{ba as K,bb as C}from"./BGIsFGxD.js";var P=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},k={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},q=class{#e=k;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},T=new q;function Q(e){setTimeout(e,0)}var p=typeof window>"u"||"Deno"in globalThis;function ee(){}function te(e,t){return typeof e=="function"?e(t):e}function A(e){return typeof e=="number"&&e>=0&&e!==1/0}function ne(e,t){return Math.max(e+(t||0)-Date.now(),0)}function se(e,t){return typeof e=="function"?e(t):e}function re(e,t){return typeof e=="function"?e(t):e}function ie(e,t){const{type:n="all",exact:i,fetchStatus:s,predicate:o,queryKey:a,stale:r}=e;if(a){if(i){if(t.queryHash!==D(a,t.options))return!1}else if(!O(t.queryKey,a))return!1}if(n!=="all"){const u=t.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof r=="boolean"&&t.isStale()!==r||s&&s!==t.state.fetchStatus||o&&!o(t))}function oe(e,t){const{exact:n,status:i,predicate:s,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(j(t.options.mutationKey)!==j(o))return!1}else if(!O(t.options.mutationKey,o))return!1}return!(i&&t.state.status!==i||s&&!s(t))}function D(e,t){return(t?.queryKeyHashFn||j)(e)}function j(e){return JSON.stringify(e,(t,n)=>S(n)?Object.keys(n).sort().reduce((i,s)=>(i[s]=n[s],i),{}):n)}function O(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>O(e[n],t[n])):!1}var N=Object.prototype.hasOwnProperty;function I(e,t){if(e===t)return e;const n=F(e)&&F(t);if(!n&&!(S(e)&&S(t)))return t;const s=(n?e:Object.keys(e)).length,o=n?t:Object.keys(t),a=o.length,r=n?new Array(a):{};let u=0;for(let h=0;h<a;h++){const l=n?h:o[h],y=e[l],f=t[l];if(y===f){r[l]=y,(n?h<s:N.call(e,l))&&u++;continue}if(y===null||f===null||typeof y!="object"||typeof f!="object"){r[l]=f;continue}const v=I(y,f);r[l]=v,v===y&&u++}return s===a&&u===s?e:r}function ue(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function F(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function S(e){if(!E(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!E(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function E(e){return Object.prototype.toString.call(e)==="[object Object]"}function U(e){return new Promise(t=>{T.setTimeout(t,e)})}function ae(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?I(e,t):t}function ce(e,t,n=0){const i=[...e,t];return n&&i.length>n?i.slice(1):i}function le(e,t,n=0){const i=[t,...e];return n&&i.length>n?i.slice(0,-1):i}var z=Symbol();function fe(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===z?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var G=class extends P{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!p&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},B=new G;function H(){let e,t;const n=new Promise((s,o)=>{e=s,t=o});n.status="pending",n.catch(()=>{});function i(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{i({status:"fulfilled",value:s}),e(s)},n.reject=s=>{i({status:"rejected",reason:s}),t(s)},n}var _=Q;function V(){let e=[],t=0,n=r=>{r()},i=r=>{r()},s=_;const o=r=>{t?e.push(r):s(()=>{n(r)})},a=()=>{const r=e;e=[],r.length&&s(()=>{i(()=>{r.forEach(u=>{n(u)})})})};return{batch:r=>{let u;t++;try{u=r()}finally{t--,t||a()}return u},batchCalls:r=>(...u)=>{o(()=>{r(...u)})},schedule:o,setNotifyFunction:r=>{n=r},setBatchNotifyFunction:r=>{i=r},setScheduler:r=>{s=r}}}var he=V(),J=class extends P{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!p&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(n=>{n(e)}))}isOnline(){return this.#e}},L=new J;function Z(e){return Math.min(1e3*2**e,3e4)}function $(e){return(e??"online")==="online"?L.isOnline():!0}var W=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function ye(e){let t=!1,n=0,i;const s=H(),o=()=>s.status!=="pending",a=c=>{if(!o()){const m=new W(c);f(m),e.onCancel?.(m)}},r=()=>{t=!0},u=()=>{t=!1},h=()=>B.isFocused()&&(e.networkMode==="always"||L.isOnline())&&e.canRun(),l=()=>$(e.networkMode)&&e.canRun(),y=c=>{o()||(i?.(),s.resolve(c))},f=c=>{o()||(i?.(),s.reject(c))},v=()=>new Promise(c=>{i=m=>{(o()||h())&&c(m)},e.onPause?.()}).then(()=>{i=void 0,o()||e.onContinue?.()}),w=()=>{if(o())return;let c;const m=n===0?e.initialPromise:void 0;try{c=m??e.fn()}catch(d){c=Promise.reject(d)}Promise.resolve(c).then(y).catch(d=>{if(o())return;const b=e.retry??(p?0:3),g=e.retryDelay??Z,M=typeof g=="function"?g(n,d):g,x=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,d);if(t||!x){f(d);return}n++,e.onFail?.(n,d),U(M).then(()=>h()?void 0:v()).then(()=>{t?f(d):w()})})};return{promise:s,status:()=>s.status,cancel:a,continue:()=>(i?.(),s),cancelRetry:r,continueRetry:u,canStart:l,start:()=>(l()?w():v().then(w),s)}}var de=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),A(this.gcTime)&&(this.#e=T.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(p?1/0:300*1e3))}clearGcTimeout(){this.#e&&(T.clearTimeout(this.#e),this.#e=void 0)}};const R=Symbol("QueryClient"),me=()=>{const e=C(R);if(!e)throw new Error("No QueryClient was found in Svelte context. Did you forget to wrap your component with QueryClientProvider?");return e},ve=e=>{K(R,e)},X=Symbol("isRestoring"),be=()=>{try{return C(X)??{current:!1}}catch{return{current:!1}}};export{O as A,ve as B,W as C,de as R,P as S,ee as a,re as b,ye as c,se as d,fe as e,$ as f,ue as g,j as h,me as i,p as j,A as k,T as l,B as m,he as n,be as o,H as p,le as q,ae as r,z as s,ne as t,ce as u,oe as v,D as w,ie as x,L as y,te as z};
