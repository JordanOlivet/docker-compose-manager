import{c as V,a as l,d as ve,e as Le,f,b as Me}from"./AQshOrwM.js";import{f as q,p as Z,a as ee,aI as Ee,c as a,n as be,r as t,s as g,t as A,b as le,k as ce,g as s,d as j,e as Fe}from"./BGIsFGxD.js";import{s as He}from"./4pOCAdSq.js";import{l as Ie,s as Ne,p as R,i as y,b as ue,a as fe}from"./BBZnTf8d.js";import{f as W,b as U,s as Y,r as Ve,e as qe,d as ge,i as Ke}from"./BIIYjbM9.js";import{c as Qe}from"./CXvqTlXp.js";import"./CVCFcqur.js";import{I as Re,s as Ue,a as z,t as pe}from"./DNE0aubT.js";import{s as F}from"./CK6JJk40.js";import{b as Oe}from"./jbU8H10p.js";import{L as Te}from"./CVZ57CPP.js";import{c as Xe}from"./Dw9yDBlQ.js";function $e(o,e){const c=Ie(e,["children","$$slots","$$events","$$legacy"]);const h=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];Re(o,Ne({name:"x"},()=>c,{get iconNode(){return h},children:(k,w)=>{var v=V(),d=q(v);Ue(d,e,"default",{}),l(k,v)},$$slots:{default:!0}}))}const Ge={getPaths:async()=>(await z.get("/config/paths")).data.data,addPath:async o=>(await z.post("/config/paths",o)).data.data,updatePath:async(o,e)=>(await z.put(`/config/paths/${o}`,e)).data.data,deletePath:async o=>{await z.delete(`/config/paths/${o}`)},getSettings:async()=>(await z.get("/config/settings")).data.data,updateSetting:async(o,e)=>{await z.put(`/config/settings/${o}`,e)},deleteSetting:async o=>{await z.delete(`/config/settings/${o}`)},browseDirectories:async o=>{const e=new URLSearchParams;o&&e.append("path",o);const c=e.toString(),h=c?`/config/browse?${c}`:"/config/browse";return(await z.get(h)).data.data}};var Je=f('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50"><div><button class="absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"><!> <span class="sr-only">Close</span></button> <!></div></div>');function _r(o,e){Z(e,!0);let c=R(e,"open",3,!1);function h(r){r.key==="Escape"&&c()&&e.onclose?.()}function k(r){r.target===r.currentTarget&&e.onclose?.()}var w=V();Le("keydown",Ee,h);var v=q(w);{var d=r=>{var x=Je();x.__click=k;var D=a(x),P=a(D);P.__click=function(...u){e.onclose?.apply(this,u)};var m=a(P);$e(m,{class:"h-4 w-4"}),be(2),t(P);var _=g(P,2);{var B=u=>{var L=V(),K=q(L);He(K,()=>e.children),l(u,L)};y(_,u=>{e.children&&u(B)})}t(D),t(x),A(u=>U(D,1,u),[()=>W(Qe("relative bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-lg w-full mx-4 max-h-[90vh] overflow-auto",e.class))]),l(r,x)};y(v,r=>{c()&&r(d)})}l(o,w),ee()}ve(["click"]);var We=f('<p class="text-sm text-gray-600 dark:text-gray-400"> </p>'),Ye=f('<div role="status" aria-live="polite"><!> <!></div>');function Ze(o,e){Z(e,!0);const c=()=>ue(pe,"$t",h),[h,k]=fe();let w=R(e,"size",3,"md"),v=R(e,"class",3,"");const d={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"};var r=Ye(),x=a(r);Te(x,{get class(){return`${d[w()]??""} animate-spin text-blue-600`},"aria-hidden":"true"});var D=g(x,2);{var P=m=>{var _=We(),B=a(_,!0);t(_),A(()=>F(B,e.text)),l(m,_)};y(D,m=>{e.text&&m(P)})}t(r),A(m=>{Y(r,"aria-label",m),U(r,1,`flex flex-col items-center justify-center gap-3 ${v()??""}`)},[()=>e.text||c()("common.loading")]),l(o,r),ee(),k()}var er=f('<div class="flex justify-center items-center h-32"><!></div>'),rr=f('<div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3 text-red-700 dark:text-red-400 text-sm"> </div>'),ar=f('<div class="mb-4 px-3 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm text-gray-700 dark:text-gray-300"><span class="font-semibold text-gray-900 dark:text-white">Current:</span> <span class="font-mono"> </span></div>'),tr=f('<button class="w-full text-left px-3 py-2.5 rounded-lg hover:bg-white dark:hover:bg-gray-800 border border-transparent hover:border-gray-200 dark:hover:border-gray-700 flex items-center gap-2 text-sm transition-all font-medium text-gray-700 dark:text-gray-300 cursor-pointer"><svg class="w-4 h-4 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> <span class="font-semibold">.. (Parent Directory)</span></button>'),or=f('<div class="text-gray-500 dark:text-gray-400 text-sm italic py-8 text-center bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg">No subdirectories found</div>'),sr=Me('<svg class="w-4 h-4 shrink-0 text-gray-400 dark:text-gray-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"></path></svg>'),nr=f('<button><svg fill="currentColor" viewBox="0 0 20 20"><path d="M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"></path></svg> <span class="truncate flex-1"> </span> <!></button>'),dr=f('<div class="space-y-1"><!> <!> <!> <!></div>'),ir=f('<div class="fixed inset-0 bg-black/50 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center z-100"><div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 w-[600px] max-h-[600px] flex flex-col"><div class="p-6 border-b border-gray-200 dark:border-gray-700 bg-white/50 dark:bg-gray-800/50"><div class="flex items-center gap-3 mb-4"><div class="p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg"><svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="currentColor" viewBox="0 0 20 20"><path d="M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"></path></svg></div> <h2 class="text-xl font-bold text-gray-900 dark:text-white"> </h2></div> <div class="flex gap-2"><input type="text" class="flex-1 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm font-mono bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 transition-colors"/> <button class="px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed"> </button></div></div> <div class="flex-1 overflow-auto p-6 bg-gray-50 dark:bg-gray-900"><!></div> <div class="p-6 border-t border-gray-200 dark:border-gray-700 bg-white/50 dark:bg-gray-800/50 flex justify-end gap-3"><button class="px-5 py-2.5 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors font-medium">Cancel</button> <button class="px-5 py-2.5 bg-blue-600 dark:bg-blue-700 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 disabled:bg-gray-300 dark:disabled:bg-gray-700 disabled:text-gray-500 dark:disabled:text-gray-500 disabled:cursor-not-allowed transition-colors font-medium shadow-lg hover:shadow-xl disabled:shadow-none">Select</button></div></div></div>');function kr(o,e){Z(e,!0);const c=()=>ue(pe,"$t",h),[h,k]=fe();let w=R(e,"initialPath",3,""),v=le(ce(w())),d=le(ce(w()||""));const r=Xe(()=>({queryKey:["browseDirectories",s(v)],queryFn:()=>Ge.browseDirectories(s(v))}));function x(i){j(v,i,!0),j(d,i,!0)}function D(){r.data?.parentPath&&(j(v,r.data.parentPath,!0),j(d,r.data.parentPath,!0))}function P(){s(d)&&e.onSelect(s(d))}function m(i){i.key==="Enter"&&j(v,s(d),!0)}var _=ir(),B=a(_),u=a(B),L=a(u),K=g(a(L),2),ye=a(K,!0);t(K),t(L);var re=g(L,2),H=a(re);Ve(H),H.__keydown=m;var Q=g(H,2);Q.__click=()=>j(v,s(d),!0);var he=a(Q,!0);t(Q),t(re),t(u);var O=g(u,2),xe=a(O);{var me=i=>{var C=er(),I=a(C);Ze(I,{}),t(C),l(i,C)},_e=i=>{var C=V(),I=q(C);{var ke=M=>{var E=rr(),T=a(E);t(E),A(()=>F(T,`Error loading directories: ${(r.error instanceof Error?r.error.message:"Unknown error")??""}`)),l(M,E)},we=M=>{var E=V(),T=q(E);{var Pe=X=>{var $=dr(),se=a($);{var Ce=b=>{var n=ar(),S=g(a(n),2),p=a(S,!0);t(S),t(n),A(()=>F(p,r.data.currentPath||"Root")),l(b,n)};y(se,b=>{r.data.currentPath&&b(Ce)})}var ne=g(se,2);{var Se=b=>{var n=tr();n.__click=D;var S=a(n),p=a(S);Y(p,"stroke-width",2),t(S),be(2),t(n),l(b,n)};y(ne,b=>{r.data.parentPath&&b(Se)})}var de=g(ne,2);{var ze=b=>{var n=or();l(b,n)};y(de,b=>{r.data.directories.length===0&&b(ze)})}var De=g(de,2);qe(De,17,()=>r.data.directories,Ke,(b,n)=>{const S=Fe(()=>s(d)===s(n).path);var p=nr();p.__click=()=>s(n).isAccessible&&x(s(n).path);var ie=a(p),G=g(ie,2),je=a(G,!0);t(G);var Ae=g(G,2);{var Be=N=>{var J=sr();l(N,J)};y(Ae,N=>{s(n).isAccessible||N(Be)})}t(p),A((N,J)=>{p.disabled=!s(n).isAccessible,U(p,1,N),U(ie,0,J),F(je,s(n).name)},[()=>W(ge("w-full text-left px-3 py-2.5 rounded-lg flex items-center gap-2 text-sm transition-all border",s(n).isAccessible&&["hover:bg-white dark:hover:bg-gray-800 cursor-pointer","hover:border-gray-200 dark:hover:border-gray-700","text-gray-700 dark:text-gray-300"],!s(n).isAccessible&&["text-gray-400 dark:text-gray-600 cursor-not-allowed","bg-gray-100 dark:bg-gray-800/50"],s(S)?["bg-blue-50 dark:bg-blue-900/20","border-blue-500 dark:border-blue-400 shadow-sm"]:"border-transparent")),()=>W(ge("w-4 h-4 shrink-0",s(S)?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400"))]),l(b,p)}),t($),l(X,$)};y(T,X=>{r.data&&X(Pe)},!0)}l(M,E)};y(I,M=>{r.error?M(ke):M(we,!1)},!0)}l(i,C)};y(xe,i=>{r.isLoading?i(me):i(_e,!1)})}t(O);var ae=g(O,2),te=a(ae);te.__click=function(...i){e.onCancel?.apply(this,i)};var oe=g(te,2);oe.__click=P,t(ae),t(B),t(_),A((i,C,I)=>{F(ye,i),Y(H,"placeholder",C),Q.disabled=!s(d),F(he,I),oe.disabled=!s(d)},[()=>c()("common.selectFolder"),()=>c()("common.enterOrSelectPath"),()=>c()("common.go")]),Oe(H,()=>s(d),i=>j(d,i)),l(o,_),ee(),k()}ve(["keydown","click"]);export{_r as D,kr as F,$e as X,Ge as c};
