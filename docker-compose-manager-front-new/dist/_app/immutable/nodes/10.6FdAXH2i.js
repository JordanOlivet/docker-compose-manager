import{d as be,f as g,a as u,c as Qt,t as he}from"../chunks/AQshOrwM.js";import{p as ke,k as Et,b as we,u as Se,a as Ce,d as Tt,s as c,c as e,g as o,e as N,r as t,f as rt,t as p,n as It}from"../chunks/BGIsFGxD.js";import{s as d}from"../chunks/CK6JJk40.js";import{r as Re,s as P,e as De,b as $e}from"../chunks/BIIYjbM9.js";import{i as w,a as Ke,b as Fe}from"../chunks/BBZnTf8d.js";import{b as Le}from"../chunks/jbU8H10p.js";import{t as Ae}from"../chunks/DNE0aubT.js";import{c as G}from"../chunks/BVN2tSMg.js";import{L as qe}from"../chunks/BUAbUYdX.js";import{C as Me}from"../chunks/B4PLRw1v.js";import{B as Ne}from"../chunks/BZEFvVZa.js";import{g as Pe}from"../chunks/lu7k8_0b.js";import{E as xt}from"../chunks/B54_NynL.js";import{c as Qe,R as Ee}from"../chunks/Do2vTpg_.js";import{u as Te}from"../chunks/ygxaYeff.js";import{c as Ie}from"../chunks/Dw9yDBlQ.js";import{c as at}from"../chunks/Bri70JPp.js";import{t as S}from"../chunks/CUtoxrzn.js";import{S as Wt}from"../chunks/iUuFbj3C.js";import{C as We}from"../chunks/QbwWRdFs.js";import{T as je}from"../chunks/BJjaivRV.js";import{S as Oe,P as Be}from"../chunks/B8pBSBZ4.js";function Ue(Q,E){let r=null;return(...st)=>{r&&clearTimeout(r),r=setTimeout(()=>Q(...st),E)}}function Ve(Q,E){return Ue(Q,E)}var ze=g('<div class="text-center py-8 text-red-500"> </div>'),Ge=g('<div class="text-center py-12 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-lg"><div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-700 mb-3"><!></div> <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2"> </h3> <p class="text-sm text-gray-600 dark:text-gray-400"> </p></div>'),He=g('<div class="text-center py-12 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-lg"><div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-700 mb-3"><!></div> <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">No containers found</h3> <p class="text-sm text-gray-600 dark:text-gray-400">Try adjusting your search criteria</p></div>'),Je=g('<span class="inline-block ml-1"> </span>'),Xe=g('<span class="inline-block ml-1"> </span>'),Ye=g('<span class="inline-block ml-1"> </span>'),Ze=g('<span class="inline-block ml-1"> </span>'),tr=g('<button class="p-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors cursor-pointer text-xs"><!></button> <button class="p-1 text-yellow-600 hover:text-yellow-800 dark:text-yellow-400 dark:hover:text-yellow-300 hover:bg-yellow-50 dark:hover:bg-yellow-900/20 rounded transition-colors cursor-pointer text-xs"><!></button>',1),er=g('<button class="p-1 text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors cursor-pointer text-xs"><!></button>'),rr=g('<tr class="hover:bg-white dark:hover:bg-gray-800 transition-all"><td class="px-4 py-2 whitespace-nowrap"><button class="text-xs font-medium text-blue-600 dark:text-blue-400 hover:underline focus:outline-none cursor-pointer"> </button> <div class="text-[10px] text-gray-500 dark:text-gray-400 font-mono"> </div></td><td class="px-4 py-2"><div class="text-xs text-gray-900 dark:text-gray-300"> </div></td><td class="px-4 py-2 whitespace-nowrap"><span> </span></td><td class="px-4 py-2"><div class="text-xs text-gray-500 dark:text-gray-400"> </div></td><td class="px-4 py-2 whitespace-nowrap text-xs"><div class="flex items-center gap-1"><!> <button class="p-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors cursor-pointer text-xs"><!></button></div></td></tr>'),ar=g('<div class="bg-linear-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 overflow-visible shadow hover:shadow-lg transition-all duration-300"><div class="overflow-x-auto"><table class="w-full"><thead class="bg-white/50 dark:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700"><tr><th class="px-4 py-2 text-left text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wider cursor-pointer select-none"> <!></th><th class="px-4 py-2 text-left text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wider cursor-pointer select-none"> <!></th><th class="px-4 py-2 text-left text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wider cursor-pointer select-none"> <!></th><th class="px-4 py-2 text-left text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wider cursor-pointer select-none"> <!></th><th class="px-4 py-2 text-left text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wider"> </th></tr></thead><tbody class="divide-y divide-gray-100 dark:divide-gray-700"></tbody></table></div></div>'),sr=g('<div class="mb-2"><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-1"> </h1> <p class="text-base text-gray-600 dark:text-gray-400"> </p></div> <!></div></div> <div class="relative max-w-md"><!> <input type="text" class="w-full pl-10 pr-4 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"/></div> <!>',1),or=g('<div class="space-y-4"><!> <!></div>');function $r(Q,E){ke(E,!0);const r=()=>Fe(Ae,"$t",st),[st,jt]=Ke();let i=Et({showAll:!0,search:"",sortKey:"name",sortDir:"asc"}),h=we(Et({open:!1,containerId:"",containerName:"",isRunning:!1}));const T=Te(),L=Ie(()=>({queryKey:["containers",{all:i.showAll}],queryFn:()=>G.list(i.showAll),refetchInterval:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,staleTime:6e4})),mt=Ve(()=>T.invalidateQueries({queryKey:["containers"]}),500);Se(()=>{const s=Qe({onOperationUpdate:n=>{const I=n.status==="completed"||n.status==="failed",A=n.type&&n.type.toLowerCase().includes("container");I&&A&&mt(),n.errorMessage&&S.error(`Operation error: ${n.errorMessage}`)},onContainerStateChanged:n=>{console.log(`Container ${n.containerName} changed state: ${n.action}`),mt()},onConnected:()=>{console.log("SignalR connected - listening for container updates")},onDisconnected:n=>{n&&console.error("SignalR disconnected with error:",n)},onReconnecting:n=>{console.warn("SignalR reconnecting...",n)}});return()=>s?.()});const pt=at(()=>({mutationFn:s=>G.start(s),onSuccess:()=>{S.success(r()("containers.startSuccess")),T.invalidateQueries({queryKey:["containers"]})},onError:s=>{S.error(s.response?.data?.message||r()("containers.startFailed"))}})),ft=at(()=>({mutationFn:s=>G.stop(s),onSuccess:()=>{S.success(r()("containers.stopSuccess")),T.invalidateQueries({queryKey:["containers"]})},onError:s=>{S.error(s.response?.data?.message||r()("containers.stopFailed"))}})),yt=at(()=>({mutationFn:s=>G.restart(s),onSuccess:()=>{S.success(r()("containers.restartSuccess")),T.invalidateQueries({queryKey:["containers"]})},onError:s=>{S.error(s.response?.data?.message||r()("containers.restartFailed"))}})),_t=at(()=>({mutationFn:({id:s,force:n})=>G.remove(s,n),onSuccess:()=>{S.success(r()("containers.removeSuccess")),T.invalidateQueries({queryKey:["containers"]}),Tt(h,{open:!1,containerId:"",containerName:"",isRunning:!1},!0)},onError:s=>{S.error(s.response?.data?.message||r()("containers.removeFailed"))}})),bt=N(()=>[...(L.data??[]).filter(n=>n.name.toLowerCase().includes(i.search.toLowerCase())||n.image.toLowerCase().includes(i.search.toLowerCase()))].sort((n,I)=>{const A=v=>{switch(i.sortKey){case"name":return v.name.startsWith("/")?v.name.slice(1):v.name;case"image":return v.image||"";case"state":return v.state||"";case"status":return v.status||"";default:return""}},J=A(n)?.toString().toLowerCase(),k=A(I)?.toString().toLowerCase();return J<k?i.sortDir==="asc"?-1:1:J>k?i.sortDir==="asc"?1:-1:0}));function H(s){i.sortKey===s?i.sortDir=i.sortDir==="asc"?"desc":"asc":(i.sortKey=s,i.sortDir="asc")}function Ot(s){switch(s){case xt.Running:return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case xt.Exited:return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}}function Bt(){_t.mutate({id:o(h).containerId,force:o(h).isRunning})}var ot=or(),ht=e(ot);{var Ut=s=>{{let n=N(()=>r()("common.loading"));qe(s,{get message(){return o(n)}})}},Vt=s=>{var n=Qt(),I=rt(n);{var A=k=>{var v=ze(),W=e(v);t(v),p(X=>d(W,`${X??""}: ${L.error.message??""}`),[()=>r()("errors.failedToLoad")]),u(k,v)},J=k=>{var v=sr(),W=rt(v),X=e(W),nt=e(X),it=e(nt),Gt=e(it,!0);t(it);var kt=c(it,2),Ht=e(kt,!0);t(kt),t(nt);var Jt=c(nt,2);{let x=N(()=>i.showAll?"default":"outline");Ne(Jt,{get variant(){return o(x)},onclick:()=>i.showAll=!i.showAll,children:(y,C)=>{It();var q=he();p($=>d(q,$),[()=>i.showAll?r()("containers.showRunning"):r()("containers.showAll")]),u(y,q)},$$slots:{default:!0}})}t(X),t(W);var ct=c(W,2),wt=e(ct);Wt(wt,{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"});var lt=c(wt,2);Re(lt),t(ct);var Xt=c(ct,2);{var Yt=x=>{var y=Ge(),C=e(y),q=e(C);We(q,{class:"w-8 h-8 text-gray-400"}),t(C);var $=c(C,2),R=e($,!0);t($);var _=c($,2),K=e(_,!0);t(_),t(y),p((M,j)=>{d(R,M),d(K,j)},[()=>r()("containers.noContainers"),()=>r()("containers.subtitle")]),u(x,y)},Zt=x=>{var y=Qt(),C=rt(y);{var q=R=>{var _=He(),K=e(_),M=e(K);Wt(M,{class:"w-8 h-8 text-gray-400"}),t(K),It(4),t(_),u(R,_)},$=R=>{var _=ar(),K=e(_),M=e(K),j=e(M),St=e(j),Y=e(St);Y.__click=()=>H("name");var Ct=e(Y),te=c(Ct);{var ee=l=>{var a=Je(),m=e(a,!0);t(a),p(()=>d(m,i.sortDir==="asc"?"↑":"↓")),u(l,a)};w(te,l=>{i.sortKey==="name"&&l(ee)})}t(Y);var Z=c(Y);Z.__click=()=>H("image");var Rt=e(Z),re=c(Rt);{var ae=l=>{var a=Xe(),m=e(a,!0);t(a),p(()=>d(m,i.sortDir==="asc"?"↑":"↓")),u(l,a)};w(re,l=>{i.sortKey==="image"&&l(ae)})}t(Z);var tt=c(Z);tt.__click=()=>H("state");var Dt=e(tt),se=c(Dt);{var oe=l=>{var a=Ye(),m=e(a,!0);t(a),p(()=>d(m,i.sortDir==="asc"?"↑":"↓")),u(l,a)};w(se,l=>{i.sortKey==="state"&&l(oe)})}t(tt);var et=c(tt);et.__click=()=>H("status");var $t=e(et),ne=c($t);{var ie=l=>{var a=Ze(),m=e(a,!0);t(a),p(()=>d(m,i.sortDir==="asc"?"↑":"↓")),u(l,a)};w(ne,l=>{i.sortKey==="status"&&l(ie)})}t(et);var Kt=c(et),ce=e(Kt,!0);t(Kt),t(St),t(j);var Ft=c(j);De(Ft,21,()=>o(bt),l=>l.id,(l,a)=>{const m=N(()=>o(a).state===xt.Running);var O=rr(),B=e(O),U=e(B);U.__click=()=>Pe(`/containers/${o(a).id}`);var le=e(U,!0);t(U);var Lt=c(U,2),de=e(Lt,!0);t(Lt),t(B);var dt=c(B),At=e(dt),ue=e(At,!0);t(At),t(dt);var ut=c(dt),vt=e(ut),ve=e(vt,!0);t(vt),t(ut);var gt=c(ut),qt=e(gt),ge=e(qt,!0);t(qt),t(gt);var Mt=c(gt),Nt=e(Mt),Pt=e(Nt);{var xe=D=>{var f=tr(),b=rt(f);b.__click=()=>yt.mutate(o(a).id);var z=e(b);Ee(z,{class:"w-3 h-3"}),t(b);var F=c(b,2);F.__click=()=>ft.mutate(o(a).id);var fe=e(F);Oe(fe,{class:"w-3 h-3"}),t(F),p((ye,_e)=>{P(b,"title",ye),b.disabled=yt.isPending,P(F,"title",_e),F.disabled=ft.isPending},[()=>r()("containers.restart"),()=>r()("containers.stop")]),u(D,f)},me=D=>{var f=er();f.__click=()=>pt.mutate(o(a).id);var b=e(f);Be(b,{class:"w-3 h-3"}),t(f),p(z=>{P(f,"title",z),f.disabled=pt.isPending},[()=>r()("containers.start")]),u(D,f)};w(Pt,D=>{o(m)?D(xe):D(me,!1)})}var V=c(Pt,2);V.__click=()=>Tt(h,{open:!0,containerId:o(a).id,containerName:o(a).name,isRunning:o(m)},!0);var pe=e(V);je(pe,{class:"w-3 h-3"}),t(V),t(Nt),t(Mt),t(O),p((D,f,b,z,F)=>{P(U,"title",D),d(le,f),d(de,b),d(ue,o(a).image),$e(vt,1,z),d(ve,o(a).state),d(ge,o(a).status),P(V,"title",F),V.disabled=_t.isPending},[()=>r()("containers.viewDetails"),()=>o(a).name.startsWith("/")?o(a).name.slice(1):o(a).name,()=>o(a).id.substring(0,12),()=>`px-2 py-0.5 inline-flex text-xs leading-5 font-semibold rounded-full ${Ot(o(a).state)}`,()=>r()("containers.remove")]),u(l,O)}),t(Ft),t(M),t(K),t(_),p((l,a,m,O,B)=>{d(Ct,`${l??""} `),d(Rt,`${a??""} `),d(Dt,`${m??""} `),d($t,`${O??""} `),d(ce,B)},[()=>r()("containers.name"),()=>r()("containers.image"),()=>r()("containers.state"),()=>r()("containers.status"),()=>r()("containers.actions")]),u(R,_)};w(C,R=>{o(bt).length===0?R(q):R($,!1)},!0)}u(x,y)};w(Xt,x=>{!L.data||L.data.length===0?x(Yt):x(Zt,!1)})}p((x,y,C)=>{d(Gt,x),d(Ht,y),P(lt,"placeholder",C)},[()=>r()("containers.title"),()=>r()("containers.subtitle"),()=>r()("containers.searchPlaceholder")||"Search containers..."]),Le(lt,()=>i.search,x=>i.search=x),u(k,v)};w(I,k=>{L.error?k(A):k(J,!1)},!0)}u(s,n)};w(ht,s=>{L.isLoading?s(Ut):s(Vt,!1)})}var zt=c(ht,2);{let s=N(()=>r()("containers.confirmRemove")),n=N(()=>o(h).isRunning?r()("containers.confirmRemoveRunningWithName",{name:o(h).containerName}):r()("containers.confirmRemoveWithName",{name:o(h).containerName}));Me(zt,{get open(){return o(h).open},get title(){return o(s)},get description(){return o(n)},onconfirm:Bt,oncancel:()=>o(h).open=!1})}t(ot),u(Q,ot),Ce(),jt()}be(["click"]);export{$r as component};
