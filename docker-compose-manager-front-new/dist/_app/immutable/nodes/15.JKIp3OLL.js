import{c as le,a as n,d as Ue,f as h,t as W}from"../chunks/AQshOrwM.js";import{f as S,p as Xe,b as ie,k as qe,t as b,a as Ye,d as $,s as a,c as t,g as r,r as e,n as G,e as xe}from"../chunks/BGIsFGxD.js";import{s as l}from"../chunks/CK6JJk40.js";import{e as Re,s as Ze,r as Se}from"../chunks/BIIYjbM9.js";import{l as et,s as tt,i as K,a as at,b as rt}from"../chunks/BBZnTf8d.js";import{b as st,c as ot}from"../chunks/jbU8H10p.js";import{D as nt,c as ye,F as it}from"../chunks/Dkv5VvjD.js";import{c as lt}from"../chunks/C1OtUQtP.js";import{L as dt}from"../chunks/BUAbUYdX.js";import{C as ct,T as vt}from"../chunks/B4PLRw1v.js";import{B as be}from"../chunks/BZEFvVZa.js";import{C as pt,a as ut,b as mt}from"../chunks/D2rqKE8K.js";import{C as ft}from"../chunks/cuYGTcpL.js";import{B as Te}from"../chunks/BvXwocyZ.js";import{I as gt,s as _t,t as ht}from"../chunks/DNE0aubT.js";import{u as xt}from"../chunks/ygxaYeff.js";import{c as Le}from"../chunks/Dw9yDBlQ.js";import{c as Oe}from"../chunks/Bri70JPp.js";import{t as Z}from"../chunks/CUtoxrzn.js";import{P as yt}from"../chunks/DiIcC3HA.js";import"../chunks/CVCFcqur.js";import{T as bt}from"../chunks/BJjaivRV.js";import{S as $t}from"../chunks/iUuFbj3C.js";function Qe(de,ee){const s=et(ee,["children","$$slots","$$events","$$legacy"]);const ce=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"}]];gt(de,tt({name:"folder-open"},()=>s,{get iconNode(){return ce},children:(ve,D)=>{var M=le(),N=S(M);_t(N,ee,"default",{}),n(ve,M)},$$slots:{default:!0}}))}var wt=h("<!> ",1),Pt=h('<div class="flex items-center justify-between"><!> <!></div>'),kt=h('<div class="text-center py-8 text-red-500"> </div>'),Ct=h('<div class="text-center py-8"><!> <p class="text-gray-600 dark:text-gray-400">No compose paths configured</p> <p class="text-sm text-gray-500 dark:text-gray-500 mt-2">Add a path to start discovering compose files</p></div>'),jt=h('<div class="flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-lg"><div class="flex items-center gap-3"><!> <div><p class="font-mono text-sm text-gray-900 dark:text-white"> </p> <div class="flex gap-2 mt-1"><!> <!></div></div></div> <button class="p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors cursor-pointer"><!></button></div>'),At=h('<div class="space-y-3"></div>'),Dt=h('<div class="w-full flex flex-col md:flex-row md:items-center justify-between gap-4 p-4 border border-yellow-300 dark:border-yellow-600 rounded-xl bg-yellow-50 dark:bg-yellow-900/20 shadow-sm"><div class="flex-1"><p class="text-sm text-yellow-800 dark:text-yellow-200"> <span class="font-mono"> </span></p> <p class="text-xs mt-1 text-yellow-700 dark:text-yellow-300"><span class="font-medium"> </span> <span class="font-semibold"> </span></p></div> <div class="flex items-center gap-2"><button class="px-4 py-2 text-sm font-medium rounded-lg bg-yellow-500 hover:bg-yellow-600 text-white shadow-md hover:shadow-lg transition-colors cursor-pointer"> </button></div></div>'),Ft=h('<div class="mt-6 space-y-4"><h3 class="text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2"><!> </h3> <!></div>'),qt=h("<!> <!>",1),Rt=h("<!> <!>",1),St=h('<div class="p-6"><h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-4"> </h2> <div class="space-y-4"><div><label for="path" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"> </label> <div class="flex gap-2"><input id="path" type="text" placeholder="/path/to/compose/files" class="flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"/> <button type="button" class="px-3 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center gap-1 cursor-pointer"><!> </button></div></div> <div class="flex items-center gap-2"><input id="readonly" type="checkbox" class="w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"/> <label for="readonly" class="text-sm text-gray-700 dark:text-gray-300">Read Only</label></div></div> <div class="flex justify-end gap-3 mt-6"><!> <!></div></div>'),Tt=h('<div class="space-y-6"><div><h1 class="text-3xl font-bold text-gray-900 dark:text-white"> </h1> <p class="text-gray-600 dark:text-gray-400 mt-1"> </p></div> <!></div> <!> <!> <!>',1);function sa(de,ee){Xe(ee,!0);const s=()=>rt(ht,"$t",ce),[ce,ve]=at();let D=ie(qe({open:!1,title:"",description:"",onConfirm:()=>{}})),M=qe({open:!1}),N=ie(!1),F=ie(""),J=ie(!1);const $e=xt(),T=Le(()=>({queryKey:["config","paths"],queryFn:()=>ye.getPaths()})),we=Le(()=>({queryKey:["compose","projects"],queryFn:()=>lt.listProjects()})),Pe=i=>i.replace(/\\/g,"/").replace(/\/+/g,"/").toLowerCase().replace(/\/$/,"");let ke=xe(()=>{if(!we.data||!T.data)return[];const i=T.data.map(c=>Pe(c.path)),q=new Map;for(const c of we.data){if(!c.path)continue;const f=Pe(c.path);i.some(x=>f.startsWith(x)&&(f.length===x.length||f[x.length]==="/"))||q.set(c.path,{path:c.path,name:c.name||"Projet sans nom"})}return Array.from(q.values()).sort((c,f)=>c.path.localeCompare(f.path))});const te=Oe(()=>({mutationFn:i=>ye.addPath(i),onSuccess:()=>{$e.invalidateQueries({queryKey:["config","paths"]}),Z.success(s()("settings.pathAdded")),pe()},onError:()=>Z.error(s()("errors.generic"))})),Ce=Oe(()=>({mutationFn:i=>ye.deletePath(i),onSuccess:()=>{$e.invalidateQueries({queryKey:["config","paths"]}),Z.success(s()("settings.pathRemoved"))},onError:()=>Z.error(s()("errors.generic"))}));function Ee(){$(F,""),$(J,!1),M.open=!0}function pe(){M.open=!1,$(F,""),$(J,!1)}function Be(){if(!r(F).trim()){Z.error("Please enter a path");return}te.mutate({path:r(F).trim(),isReadOnly:r(J)})}function Ie(i,q){$(D,{open:!0,title:s()("settings.removePath"),description:`Are you sure you want to remove path "${q}"?`,onConfirm:()=>{Ce.mutate(i),r(D).open=!1}},!0)}function Ke(i){$(F,i,!0),$(N,!1)}function Me(){$(N,!1)}var je=Tt(),ue=S(je),me=t(ue),fe=t(me),Ne=t(fe,!0);e(fe);var Ae=a(fe,2),ze=t(Ae,!0);e(Ae),e(me);var He=a(me,2);pt(He,{children:(i,q)=>{var c=Rt(),f=S(c);ut(f,{children:(x,U)=>{var w=Pt(),L=t(w);mt(L,{children:(j,O)=>{G();var P=W();b(d=>l(P,d),[()=>s()("settings.composePathsTitle")]),n(j,P)},$$slots:{default:!0}});var z=a(L,2);be(z,{size:"sm",onclick:Ee,children:(j,O)=>{var P=wt(),d=S(P);yt(d,{class:"w-4 h-4 mr-2"});var u=a(d);b(k=>l(u,` ${k??""}`),[()=>s()("settings.addPath")]),n(j,P)},$$slots:{default:!0}}),e(w),n(x,w)},$$slots:{default:!0}});var ae=a(f,2);ft(ae,{children:(x,U)=>{var w=qt(),L=S(w);{var z=d=>{{let u=xe(()=>s()("common.loading"));dt(d,{get message(){return r(u)}})}},j=d=>{var u=le(),k=S(u);{var Q=C=>{var o=kt(),y=t(o,!0);e(o),b(v=>l(y,v),[()=>s()("errors.generic")]),n(C,o)},H=C=>{var o=le(),y=S(o);{var v=g=>{var _=Ct(),p=t(_);Qe(p,{class:"w-12 h-12 mx-auto text-gray-400 mb-4"}),G(4),e(_),n(g,_)},A=g=>{var _=At();Re(_,21,()=>T.data,p=>p.id,(p,m)=>{var R=jt(),E=t(R),re=t(E);Qe(re,{class:"w-5 h-5 text-blue-500"});var X=a(re,2),Y=t(X),se=t(Y,!0);e(Y);var V=a(Y,2),oe=t(V);{let I=xe(()=>r(m).isEnabled?"success":"secondary");Te(oe,{get variant(){return r(I)},children:(he,Je)=>{G();var ne=W();b(()=>l(ne,r(m).isEnabled?"Enabled":"Disabled")),n(he,ne)},$$slots:{default:!0}})}var ge=a(oe,2);{var _e=I=>{Te(I,{variant:"outline",children:(he,Je)=>{G();var ne=W("Read Only");n(he,ne)},$$slots:{default:!0}})};K(ge,I=>{r(m).isReadOnly&&I(_e)})}e(V),e(X),e(E);var B=a(E,2);B.__click=()=>Ie(r(m).id,r(m).path);var Ge=t(B);bt(Ge,{class:"w-4 h-4"}),e(B),e(R),b(I=>{l(se,r(m).path),Ze(B,"title",I),B.disabled=Ce.isPending},[()=>s()("settings.removePath")]),n(p,R)}),e(_),n(g,_)};K(y,g=>{!T.data||T.data.length===0?g(v):g(A,!1)},!0)}n(C,o)};K(k,C=>{T.error?C(Q):C(H,!1)},!0)}n(d,u)};K(L,d=>{T.isLoading?d(z):d(j,!1)})}var O=a(L,2);{var P=d=>{var u=Ft(),k=t(u),Q=t(k);vt(Q,{class:"w-5 h-5 text-yellow-500"});var H=a(Q);e(k);var C=a(k,2);Re(C,17,()=>r(ke),o=>o.path,(o,y)=>{var v=Dt(),A=t(v),g=t(A),_=t(g),p=a(_),m=t(p,!0);e(p),e(g);var R=a(g,2),E=t(R),re=t(E);e(E);var X=a(E,2),Y=t(X,!0);e(X),e(R),e(A);var se=a(A,2),V=t(se);V.__click=()=>te.mutate({path:r(y).path,isReadOnly:!1});var oe=t(V,!0);e(V),e(se),e(v),b((ge,_e,B)=>{l(_,`${ge??""}: `),l(m,r(y).path),l(re,`${_e??""}:`),l(Y,r(y).name),l(oe,B)},[()=>s()("settings.pathLabel"),()=>s()("settings.projectLabel"),()=>s()("settings.addThisPath")]),n(o,v)}),e(u),b(o=>l(H,` ${o??""}`),[()=>s()("settings.externalProjectsDetected")]),n(d,u)};K(O,d=>{r(ke).length>0&&d(P)})}n(x,w)},$$slots:{default:!0}}),n(i,c)},$$slots:{default:!0}}),e(ue);var De=a(ue,2);ct(De,{get open(){return r(D).open},get title(){return r(D).title},get description(){return r(D).description},get onconfirm(){return r(D).onConfirm},oncancel:()=>r(D).open=!1});var Fe=a(De,2);{var Ve=i=>{it(i,{get initialPath(){return r(F)},onSelect:Ke,onCancel:Me})};K(Fe,i=>{r(N)&&i(Ve)})}var We=a(Fe,2);nt(We,{get open(){return M.open},onclose:pe,children:(i,q)=>{var c=St(),f=t(c),ae=t(f,!0);e(f);var x=a(f,2),U=t(x),w=t(U),L=t(w,!0);e(w);var z=a(w,2),j=t(z);Se(j);var O=a(j,2);O.__click=()=>$(N,!0);var P=t(O);$t(P,{class:"w-4 h-4"});var d=a(P);e(O),e(z),e(U);var u=a(U,2),k=t(u);Se(k),G(2),e(u),e(x);var Q=a(x,2),H=t(Q);be(H,{variant:"outline",onclick:pe,children:(o,y)=>{G();var v=W();b(A=>l(v,A),[()=>s()("common.cancel")]),n(o,v)},$$slots:{default:!0}});var C=a(H,2);be(C,{onclick:Be,get disabled(){return te.isPending},children:(o,y)=>{var v=le(),A=S(v);{var g=p=>{var m=W("Adding...");n(p,m)},_=p=>{var m=W();b(R=>l(m,R),[()=>s()("settings.addPath")]),n(p,m)};K(A,p=>{te.isPending?p(g):p(_,!1)})}n(o,v)},$$slots:{default:!0}}),e(Q),e(c),b((o,y,v)=>{l(ae,o),l(L,y),l(d,` ${v??""}`)},[()=>s()("settings.addPathTitle"),()=>s()("settings.path"),()=>s()("common.search")]),st(j,()=>r(F),o=>$(F,o)),ot(k,()=>r(J),o=>$(J,o)),n(i,c)},$$slots:{default:!0}}),b((i,q)=>{l(Ne,i),l(ze,q)},[()=>s()("settings.title"),()=>s()("settings.subtitle")]),n(de,je),Ye(),ve()}Ue(["click"]);export{sa as component};
