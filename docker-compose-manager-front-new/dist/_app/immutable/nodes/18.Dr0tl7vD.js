import{c as W,a as l,f as w,t as O,e as ir}from"../chunks/AQshOrwM.js";import{f as q,p as cr,a as mr,c as s,s as d,t as b,d as n,g as e,b as j,e as F,r as o,n as vr}from"../chunks/BGIsFGxD.js";import{s as i}from"../chunks/CK6JJk40.js";import{l as fr,s as pr,a as hr,b as gr,i as Q}from"../chunks/BBZnTf8d.js";import{g as _r}from"../chunks/lu7k8_0b.js";import{I as br,s as wr,t as xr,b as $r,u as Pr}from"../chunks/DNE0aubT.js";import{a as yr}from"../chunks/czhzdzqV.js";import{P as G}from"../chunks/Bmet6DEc.js";import{B as kr}from"../chunks/BZEFvVZa.js";import{C as Cr,a as jr,b as qr}from"../chunks/D2rqKE8K.js";import{C as Ir}from"../chunks/cuYGTcpL.js";import"../chunks/CVCFcqur.js";import{t as R}from"../chunks/CUtoxrzn.js";function Sr(A,I){const r=fr(I,["children","$$slots","$$events","$$legacy"]);const B=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor"}]];br(A,pr({name:"key-round"},()=>r,{get iconNode(){return B},children:(M,S)=>{var u=W(),x=q(u);wr(x,I,"default",{}),l(M,u)},$$slots:{default:!0}}))}var zr=w('<div class="mx-auto w-16 h-16 bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl flex items-center justify-center shadow-lg mb-4"><!></div> <!> <p class="text-sm text-gray-500 dark:text-gray-400 mt-2"> </p>',1),Ar=w('<div class="mb-4 p-3 bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 rounded-lg text-sm"> </div>'),Br=w('<span class="flex items-center justify-center gap-2"><span class="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></span> </span>'),Mr=w('<!> <form><div class="mb-4"><label for="currentPassword" class="block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2"> </label> <!></div> <div class="mb-4"><label for="newPassword" class="block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2"> </label> <!></div> <div class="mb-6"><label for="confirmPassword" class="block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2"> </label> <!></div> <!></form>',1),Nr=w("<!> <!>",1),Ur=w('<div class="min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-900 dark:to-gray-800"><!></div>');function Wr(A,I){cr(I,!0);const r=()=>gr(xr,"$t",B),[B,M]=hr();let S=j(""),u=j(""),x=j(""),c=j(""),z=j(!1);async function X(U){if(U.preventDefault(),n(c,""),e(u)!==e(x)){n(c,r()("auth.passwordMismatch"),!0);return}if(e(u).length<8){n(c,r()("auth.passwordTooShort"),!0);return}n(z,!0);try{await yr.changePassword(e(S),e(u)),R.success(r()("auth.passwordChanged"));const $=$r.user;$&&Pr({...$,mustChangePassword:!1}),_r("/dashboard")}catch($){n(c,$.response?.data?.message||r()("errors.generic"),!0),R.error(e(c))}finally{n(z,!1)}}var N=Ur(),Y=s(N);Cr(Y,{class:"max-w-md w-full mx-4 shadow-xl",children:(U,$)=>{var H=Nr(),J=q(H);jr(J,{class:"text-center pb-2",children:(D,rr)=>{var P=zr(),m=q(P),K=s(m);Sr(K,{class:"w-8 h-8 text-white"}),o(m);var v=d(m,2);qr(v,{class:"text-2xl font-bold",children:(k,L)=>{vr();var p=O();b(C=>i(p,C),[()=>r()("auth.changePassword")]),l(k,p)},$$slots:{default:!0}});var f=d(v,2),y=s(f,!0);o(f),b(k=>i(y,k),[()=>r()("auth.changePasswordSubtitle")]),l(D,P)},$$slots:{default:!0}});var Z=d(J,2);Ir(Z,{class:"pt-6",children:(D,rr)=>{var P=Mr(),m=q(P);{var K=t=>{var a=Ar(),h=s(a,!0);o(a),b(()=>i(h,e(c))),l(t,a)};Q(m,t=>{e(c)&&t(K)})}var v=d(m,2),f=s(v),y=s(f),k=s(y,!0);o(y);var L=d(y,2);{let t=F(()=>r()("auth.currentPasswordPlaceholder"));G(L,{id:"currentPassword",get placeholder(){return e(t)},required:!0,get value(){return e(S)},set value(a){n(S,a,!0)}})}o(f);var p=d(f,2),C=s(p),er=s(C,!0);o(C);var tr=d(C,2);{let t=F(()=>r()("auth.newPasswordPlaceholder"));G(tr,{id:"newPassword",get placeholder(){return e(t)},required:!0,get value(){return e(u)},set value(a){n(u,a,!0)}})}o(p);var T=d(p,2),V=s(T),ar=s(V,!0);o(V);var sr=d(V,2);{let t=F(()=>r()("auth.confirmPasswordPlaceholder"));G(sr,{id:"confirmPassword",get placeholder(){return e(t)},required:!0,get value(){return e(x)},set value(a){n(x,a,!0)}})}o(T);var or=d(T,2);kr(or,{type:"submit",get disabled(){return e(z)},class:"w-full",children:(t,a)=>{var h=W(),dr=q(h);{var lr=g=>{var _=Br(),E=d(s(_));o(_),b(ur=>i(E,` ${ur??""}`),[()=>r()("common.loading")]),l(g,_)},nr=g=>{var _=O();b(E=>i(_,E),[()=>r()("auth.changePassword")]),l(g,_)};Q(dr,g=>{e(z)?g(lr):g(nr,!1)})}l(t,h)},$$slots:{default:!0}}),o(v),b((t,a,h)=>{i(k,t),i(er,a),i(ar,h)},[()=>r()("auth.currentPassword"),()=>r()("auth.newPassword"),()=>r()("auth.confirmPassword")]),ir("submit",v,X),l(D,P)},$$slots:{default:!0}}),l(U,H)},$$slots:{default:!0}}),o(N),l(A,N),mr(),M()}export{Wr as component};
