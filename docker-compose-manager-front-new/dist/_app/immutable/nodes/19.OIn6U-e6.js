import{f as g,a,t as H,c as de,e as ne}from"../chunks/AQshOrwM.js";import{p as ie,a as me,f as C,c as r,s,t as _,d as v,g as l,b as I,r as t,n as J}from"../chunks/BGIsFGxD.js";import{s as n}from"../chunks/CK6JJk40.js";import{a as ue,b as fe,i as K}from"../chunks/BBZnTf8d.js";import{g as L}from"../chunks/lu7k8_0b.js";import{t as ce,l as pe}from"../chunks/DNE0aubT.js";import{a as M}from"../chunks/czhzdzqV.js";import{I as ve}from"../chunks/FLXc8Hxn.js";import{B as ge}from"../chunks/BZEFvVZa.js";import{C as be,a as xe,b as _e}from"../chunks/D2rqKE8K.js";import{C as he}from"../chunks/cuYGTcpL.js";import{P as $e}from"../chunks/Bmet6DEc.js";import{B as ye}from"../chunks/l_zroOp3.js";var ke=g('<div class="mx-auto w-16 h-16 bg-linear-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg mb-4"><!></div> <!>',1),we=g('<div class="mb-4 p-3 bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 rounded-lg text-sm"> </div>'),Ce=g('<span class="flex items-center justify-center gap-2"><span class="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></span> </span>'),Ie=g('<!> <form><div class="mb-4"><label for="username" class="block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2"> </label> <!></div> <div class="mb-6"><label for="password" class="block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2"> </label> <!></div> <!></form> <div class="mt-6 text-center text-sm text-gray-600 dark:text-gray-400"><p> </p> <p class="font-mono bg-gray-100 dark:bg-gray-800 p-2 mt-2 rounded text-gray-800 dark:text-gray-200">admin / adminadmin</p></div>',1),Pe=g("<!> <!>",1),Te=g('<div class="min-h-screen flex items-center justify-center bg-linear-to-br from-gray-100 to-gray-200 dark:from-gray-900 dark:to-gray-800"><!></div>');function Ke(N,O){ie(O,!0);const d=()=>fe(ce,"$t",Q),[Q,R]=ue();let P=I(""),T=I(""),h=I(""),$=I(!1);async function V(B){B.preventDefault(),v(h,""),v($,!0);try{const o=await M.login({username:l(P),password:l(T)});typeof localStorage<"u"&&(localStorage.setItem("accessToken",o.accessToken),localStorage.setItem("refreshToken",o.refreshToken));const y=await M.getCurrentUser();pe(o.accessToken,o.refreshToken,y),o.mustChangePassword?L("/change-password"):L("/dashboard")}catch(o){typeof localStorage<"u"&&(localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")),v(h,o.response?.data?.message||d()("auth.loginFailed"),!0)}finally{v($,!1)}}var S=Te(),W=r(S);be(W,{class:"max-w-md w-full mx-4 shadow-xl",children:(B,o)=>{var y=Pe(),z=C(y);xe(z,{class:"text-center pb-2",children:(j,Y)=>{var b=ke(),i=C(b),q=r(i);ye(q,{class:"w-8 h-8 text-white"}),t(i);var m=s(i,2);_e(m,{class:"text-2xl font-bold",children:(x,k)=>{J();var w=H();_(A=>n(w,A),[()=>d()("app.title")]),a(x,w)},$$slots:{default:!0}}),a(j,b)},$$slots:{default:!0}});var X=s(z,2);he(X,{class:"pt-6",children:(j,Y)=>{var b=Ie(),i=C(b);{var q=e=>{var u=we(),f=r(u,!0);t(u),_(()=>n(f,l(h))),a(e,u)};K(i,e=>{l(h)&&e(q)})}var m=s(i,2),x=r(m),k=r(x),w=r(k,!0);t(k);var A=s(k,2);ve(A,{type:"text",id:"username",required:!0,autocomplete:"username",get value(){return l(P)},set value(e){v(P,e,!0)}}),t(x);var D=s(x,2),F=r(D),Z=r(F,!0);t(F);var ee=s(F,2);$e(ee,{id:"password",required:!0,autocomplete:"current-password",get value(){return l(T)},set value(e){v(T,e,!0)}}),t(D);var re=s(D,2);ge(re,{type:"submit",get disabled(){return l($)},class:"w-full",children:(e,u)=>{var f=de(),ae=C(f);{var se=c=>{var p=Ce(),U=s(r(p));t(p),_(le=>n(U,` ${le??""}`),[()=>d()("auth.loggingIn")]),a(c,p)},oe=c=>{var p=H();_(U=>n(p,U),[()=>d()("auth.login")]),a(c,p)};K(ae,c=>{l($)?c(se):c(oe,!1)})}a(e,f)},$$slots:{default:!0}}),t(m);var E=s(m,2),G=r(E),te=r(G,!0);t(G),J(2),t(E),_((e,u,f)=>{n(w,e),n(Z,u),n(te,f)},[()=>d()("auth.username"),()=>d()("auth.password"),()=>d()("auth.defaultCredentials")]),ne("submit",m,V),a(j,b)},$$slots:{default:!0}}),a(B,y)},$$slots:{default:!0}}),t(S),a(N,S),me(),R()}export{Ke as component};
